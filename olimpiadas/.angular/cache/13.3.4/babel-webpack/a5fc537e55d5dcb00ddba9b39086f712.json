{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Disciplina } from 'src/app/_models/disciplina';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/disciplina.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction DisciplinaComponent_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"div\")(7, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function DisciplinaComponent_tr_20_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const disciplina_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.updateDisciplina(disciplina_r2);\n    });\n    i0.ɵɵtext(8, \"Editar \");\n    i0.ɵɵelement(9, \"i\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" \\u00A0\\u00A0 \");\n    i0.ɵɵelementStart(11, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function DisciplinaComponent_tr_20_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const disciplina_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.deleteDisciplina(disciplina_r2.id);\n    });\n    i0.ɵɵtext(12, \"Eliminar \");\n    i0.ɵɵelement(13, \"i\", 32);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const disciplina_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(disciplina_r2.disciplina);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(disciplina_r2.descripcion);\n  }\n}\n\nfunction DisciplinaComponent_div_39_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"El nombre de la disciplina es obligatorio\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DisciplinaComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵtemplate(1, DisciplinaComponent_div_39_div_1_Template, 2, 0, \"div\", 34);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f.disciplina.errors.required);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nexport let DisciplinaComponent = /*#__PURE__*/(() => {\n  class DisciplinaComponent {\n    constructor(disciplinaService, formBuilder) {\n      this.disciplinaService = disciplinaService;\n      this.formBuilder = formBuilder;\n      this.submitted = false;\n    }\n\n    ngOnInit() {\n      this.disciplinaForm = this.formBuilder.group({\n        id: [''],\n        disciplina: ['', Validators.required],\n        descripcion: ['', Validators.required],\n        status: ['']\n      }); // Consultar la lista de disciplinas\n\n      this.getDisciplinas();\n    } // Cosultar lista de disciplinas\n\n\n    getDisciplinas() {\n      this.disciplina = [new Disciplina(1, \"Luchas\", \"Primer disciplina\", 1)];\n      this.disciplinaService.getDisciplinas().subscribe(res => {\n        this.disciplinas = res;\n        console.log(this.disciplinas);\n      }, err => console.error(err));\n    } // Consultar una disciplina\n\n\n    getDisciplina(id) {\n      this.disciplinas = null;\n      this.disciplinaService.getDisciplina(id).subscribe(res => {\n        this.disciplina = res;\n      }, err => console.error(err));\n    } // Eliminar una disciplina\n\n\n    deleteDisciplina(id) {\n      Swal.fire({\n        title: 'Eliminar Disciplina',\n        text: '¿Estás seguro de eliminar la disciplina?',\n        showDenyButton: false,\n        showCancelButton: true,\n        confirmButtonText: 'Eliminar',\n        denyButtonText: 'No eliminar'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.disciplinaService.deleteDisciplina(id).subscribe(res => {\n            Swal.fire('Eliminado!', 'La disciplina ha sido eliminada', 'success');\n            $(\"#disciplinaModal\").modal(\"hide\");\n            this.getDisciplinas();\n          }, err => console.error(err));\n        }\n      });\n    } // Crear una disciplina\n\n\n    onSubmit() {\n      this.submitted = true;\n\n      if (this.disciplinaForm.invalid) {\n        console.log(\"Formulario inválido\");\n        return;\n      }\n\n      if (this.modalTitle == \"Registrar\") {\n        this.disciplinaService.createDisciplina(this.disciplinaForm.value).subscribe(res => {\n          Swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: 'La disciplina ha sido creada',\n            showConfirmButton: false,\n            timer: 1500\n          });\n          $(\"#disciplinaModal\").modal(\"hide\");\n          this.getDisciplinas();\n          this.submitted = false;\n        }, err => console.error(err));\n      } else {\n        console.log(this.disciplinaForm.value);\n        this.disciplinaService.updateDisciplina(this.disciplinaForm.value).subscribe(res => {\n          Swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: 'La disciplina ha sido actualizada',\n            showConfirmButton: false,\n            timer: 1500\n          });\n          $(\"#disciplinaModal\").modal(\"hide\");\n          this.getDisciplinas();\n          this.submitted = false;\n        }, err => {\n          console.error(err);\n          Swal.fire({\n            icon: 'error',\n            title: 'Oops...',\n            text: 'Error al conectar con el servidor'\n          });\n        });\n      }\n    }\n\n    updateDisciplina(disciplina) {\n      this.submitted = true;\n      this.disciplinaForm.controls['id'].setValue(disciplina.id);\n      this.disciplinaForm.controls['disciplina'].setValue(disciplina.disciplina);\n      this.disciplinaForm.controls['descripcion'].setValue(disciplina.descripcion);\n      this.disciplinaForm.controls['status'].setValue(disciplina.status);\n      this.modalTitle = \"Actualizar\";\n      $(\"#disciplinaModal\").modal(\"show\");\n    }\n\n    get f() {\n      return this.disciplinaForm.controls;\n    }\n\n    openModalDisciplina() {\n      this.disciplinaForm.reset();\n      this.modalTitle = \"Registrar\";\n      $(\"#disciplinaModal\").modal(\"show\");\n    }\n\n  }\n\n  DisciplinaComponent.ɵfac = function DisciplinaComponent_Factory(t) {\n    return new (t || DisciplinaComponent)(i0.ɵɵdirectiveInject(i1.DisciplinaService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n  };\n\n  DisciplinaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DisciplinaComponent,\n    selectors: [[\"app-disciplina\"]],\n    decls: 51,\n    vars: 7,\n    consts: [[2, \"height\", \"110px\"], [1, \"container-fluid\"], [1, \"card\", \"mb-3\"], [1, \"card-header\"], [1, \"fas\", \"fa-newspaper\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-info\", \"btn-sm\", 2, \"float\", \"right\", 3, \"click\"], [1, \"card-body\"], [1, \"table\"], [1, \"thead-dark\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"disciplinaModal\", 1, \"modal\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"close\"], [1, \"modal-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"disciplina\"], [1, \"text-danger\"], [\"type\", \"text\", \"formControlName\", \"discipcontrollina\", 1, \"form-controls\", 3, \"ngClass\"], [\"class\", \"invalid-deefback\", 4, \"ngIf\"], [1, \"text-right\"], [1, \"btn\", \"btn-outline-success\", \"btn-block\"], [1, \"fas\", \"fa-save\"], [1, \"modal-footer\"], [\"data-dismiss\", \"modal\", 1, \"btn\", \"btn-outline-danger\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [1, \"fas\", \"fa-edit\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"invalid-deefback\"], [4, \"ngIf\"]],\n    template: function DisciplinaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h3\");\n        i0.ɵɵelement(5, \"i\", 4);\n        i0.ɵɵtext(6, \"\\u00A0\\u00A0Disciplina\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function DisciplinaComponent_Template_button_click_7_listener() {\n          return ctx.openModalDisciplina();\n        });\n        i0.ɵɵtext(8, \"Agregar disciplina\");\n        i0.ɵɵelement(9, \"i\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 6)(11, \"table\", 7)(12, \"thead\", 8)(13, \"tr\")(14, \"th\", 9);\n        i0.ɵɵtext(15, \"Disciplina\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\", 9);\n        i0.ɵɵtext(17, \"Descripci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"th\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"tbody\");\n        i0.ɵɵtemplate(20, DisciplinaComponent_tr_20_Template, 14, 2, \"tr\", 10);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelement(21, \"br\")(22, \"br\");\n        i0.ɵɵelementStart(23, \"div\", 11)(24, \"div\", 12)(25, \"div\", 13)(26, \"div\", 14)(27, \"h4\", 15);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 16);\n        i0.ɵɵtext(30, \"\\u00D7\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 17)(32, \"form\", 18);\n        i0.ɵɵlistener(\"ngSubmit\", function DisciplinaComponent_Template_form_ngSubmit_32_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(33, \"div\", 19)(34, \"label\", 20);\n        i0.ɵɵtext(35, \"Disciplina\");\n        i0.ɵɵelementStart(36, \"span\", 21);\n        i0.ɵɵtext(37, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(38, \"input\", 22);\n        i0.ɵɵtemplate(39, DisciplinaComponent_div_39_Template, 2, 1, \"div\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"p\", 24)(41, \"span\", 21);\n        i0.ɵɵtext(42, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(43, \"Campos requeridos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"div\")(45, \"button\", 25);\n        i0.ɵɵtext(46, \"Guardar\");\n        i0.ɵɵelement(47, \"i\", 26);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(48, \"div\", 27)(49, \"button\", 28);\n        i0.ɵɵtext(50, \"Cerrar\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngForOf\", ctx.disciplinas);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"\", ctx.modalTitle, \" Disciplina\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.disciplinaForm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, ctx.submitted && ctx.f.disciplina.errors));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.disciplina.errors);\n      }\n    },\n    directives: [i3.NgForOf, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i3.NgClass, i3.NgIf],\n    styles: [\"\"]\n  });\n  return DisciplinaComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}